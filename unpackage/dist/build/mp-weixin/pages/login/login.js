(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{1199:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){e.e("components/uni-ui/uni-status-bar/uni-status-bar").then(function(){return resolve(e("9af8"))}.bind(null,e)).catch(e.oe)},i=function(){e.e("components/common/other-login").then(function(){return resolve(e("6e9b"))}.bind(null,e)).catch(e.oe)},s={components:{uniStatusBar:o,otherLogin:i},data:function(){return{status:!1,username:"",password:"",phone:"",code:"",codeTime:0,loading:!1}},onLoad:function(){},computed:{disabled:function(){return!(""!==this.username&&""!==this.password||""!==this.phone&&""!==this.code)}},methods:{back:function(){t.navigateBack({delta:1})},initForm:function(){this.username="",this.password="",this.phone="",this.code=""},changeStatus:function(){this.initForm(),this.status=!this.status},getCode:function(){var n=this;this.codeTime>0||this.validate()&&this.$H.post("/user/sendcode",{phone:this.phone},{native:!0}).then((function(e){t.showToast({title:e.data.msg,icon:"none"}),n.codeTime=60;var o=setInterval((function(){n.codeTime>=1?n.codeTime--:(n.codeTime=0,clearInterval(o))}),1e3)}))},validate:function(){var n=/^1[34578]\d{9}$/;return!!n.test(this.phone)||(t.showToast({title:"手机号格式不正确",icon:"none"}),!1)},submit:function(){var n=this,e="",o="";if(this.status){if(!this.validate())return;e="/user/phonelogin",o={phone:this.phone,code:this.code}}else e="/user/login",o={username:this.username,password:this.password};this.loading=!0,this.$H.post(e,o).then((function(e){n.loading=!1,console.log(e),n.$U.user_id=e.id,n.$store.commit("login",e),n.$store.dispatch("openSocket"),t.navigateBack({delta:1}),t.showToast({title:"登录成功",icon:"none"})})).catch((function(t){n.loading=!1}))}}};n.default=s}).call(this,e("543d")["default"])},"3a94":function(t,n,e){"use strict";e.r(n);var o=e("ae87"),i=e("fba8");for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);var a,u=e("f0c5"),c=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);n["default"]=c.exports},ae87:function(t,n,e){"use strict";var o;e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return o}));var i=function(){var t=this,n=t.$createElement;t._self._c},s=[]},de7d:function(t,n,e){"use strict";(function(t){e("9e51");o(e("66fd"));var n=o(e("3a94"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},fba8:function(t,n,e){"use strict";e.r(n);var o=e("1199"),i=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);n["default"]=i.a}},[["de7d","common/runtime","common/vendor"]]]);
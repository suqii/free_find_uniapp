(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/common/other-login"],{"6e9b":function(n,o,e){"use strict";e.r(o);var i=e("8b33"),t=e("fa72");for(var r in t)"default"!==r&&function(n){e.d(o,n,(function(){return t[n]}))}(r);var a,c=e("f0c5"),s=Object(c["a"])(t["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);o["default"]=s.exports},"8b33":function(n,o,e){"use strict";var i;e.d(o,"b",(function(){return t})),e.d(o,"c",(function(){return r})),e.d(o,"a",(function(){return i}));var t=function(){var n=this,o=n.$createElement;n._self._c},r=[]},9582:function(n,o,e){"use strict";(function(n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e={props:{back:{type:Boolean,default:!1}},data:function(){return{providerList:[]}},mounted:function(){var o=this;n.getProvider({service:"oauth",success:function(n){o.providerList=n.provider.map((function(n){var o="",e="",i="";switch(n){case"weixin":o="微信登录",e="icon-weixin",i="bg-success";break;case"qq":o="QQ登录",e="icon-QQ",i="bg-primary";break;case"sinaweibo":o="新浪微博登录",e="icon-xinlangweibo",i="bg-warning";break}return{name:o,id:n,icon:e,bgColor:i}})),console.log(o.providerList)},fail:function(n){console.log("获取登录通道失败",n)}})},methods:{login:function(o){var e=this;console.log(o),n.login({provider:o.id,success:function(i){console.log(i),n.getUserInfo({provider:o.id,success:function(n){var i={provider:o.id,openid:n.userInfo.openId,expires_in:0,nickName:n.userInfo.nickName,avatarUrl:n.userInfo.avatarUrl};e.loginEvent(i)}})},fail:function(){n.showToast({title:"登录失败",icon:"none"})}})},loginEvent:function(o){var e=this;this.$H.post("/user/otherlogin",o).then((function(o){e.$store.commit("login",e.$U.formatUserinfo(o)),e.back&&n.navigateBack({delta:1}),n.showToast({title:"登录成功",icon:"none"})}))},mpGetUserInfo:function(o){var e=this;if(n.showLoading({title:"登录中...",mask:!0}),"getUserInfo:ok"!==o.detail.errMsg)return n.hideLoading(),void n.showModal({title:"获取用户信息失败",content:"错误原因"+o.detail.errMsg,showCancel:!1});var i=o.detail.userInfo;n.login({provider:"weixin",success:function(n){e.MpLogin({url:"/wxlogin",code:n.code,nickName:i.nickName,avatarUrl:i.avatarUrl})},complete:function(){n.hideLoading()}})},MpLogin:function(o){var e=this;this.$H.post(o.url,{code:o.code,nickName:o.nickName,avatarUrl:o.avatarUrl}).then((function(o){e.$store.commit("login",e.$U.formatUserinfo(o)),e.back&&n.navigateBack({delta:1}),n.showToast({title:"登录成功",icon:"none"})}))}}};o.default=e}).call(this,e("543d")["default"])},fa72:function(n,o,e){"use strict";e.r(o);var i=e("9582"),t=e.n(i);for(var r in i)"default"!==r&&function(n){e.d(o,n,(function(){return i[n]}))}(r);o["default"]=t.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/common/other-login-create-component',
    {
        'components/common/other-login-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("6e9b"))
        })
    },
    [['components/common/other-login-create-component']]
]);
